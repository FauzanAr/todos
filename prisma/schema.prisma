generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id            Int        @id @default(autoincrement())
  email         String     @unique
  name          String
  password      String     @default("") @db.VarChar(200)
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt
  todosOwned    Todos[]    @relation("UserOwnedTodos")
  todosAssigned Todos[]    @relation("UserAssignedTodos")
  Comments      Comments[]
}

model Todos {
  id          Int        @id @default(autoincrement())
  ownerId     Int
  owner       User       @relation("UserOwnedTodos", fields: [ownerId], references: [id])
  assignToId  Int
  assignTo    User       @relation("UserAssignedTodos", fields: [assignToId], references: [id])
  title       String     @db.VarChar(255)
  description String     @db.Text
  status      String
  dueAt       DateTime
  updatedAt   DateTime   @updatedAt
  createdAt   DateTime   @default(now())
  Comments    Comments[]
}

model Comments {
  id        Int      @id @default(autoincrement())
  todoId    Int
  todo      Todos    @relation(fields: [todoId], references: [id])
  comment   String   @db.Text
  userId    Int
  user      User     @relation(fields: [userId], references: [id])
  updatedAt DateTime @updatedAt
  createdAt DateTime @default(now())
}
